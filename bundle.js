(()=>{"use strict";let e=new class{constructor(){this.game=null,this.scaleFactor=null,this.isMobile=null}};class s extends Phaser.Scene{constructor(){super("PreloadScene"),this.progressBar=null,this.loadingText=null,this.fonts={Poppins_Bold:null}}preload(){this.load.image("one_pixel_white","assets/images/one_pixel_white.png"),this.load.image("progress_base","assets/images/progress_base.png"),this.load.image("progress_bar","assets/images/progress_bar.png")}create(){this.LoadFonts(),this.splashBg=this.add.image(Math.round(e.game.config.width/2),Math.round(e.game.config.height/2),"one_pixel_white").setOrigin(.5,.5).setScale(Math.round(e.game.config.width),Math.round(e.game.config.height)),this.splashBg.setTint(2249775),this.progressBase=this.add.image(Math.round(e.game.config.width/2),Math.round(e.game.config.height/1.25),"progress_base").setOrigin(.5,.5).setScale(e.scaleFactor,e.scaleFactor),this.progressBar=this.add.image(Math.round(e.game.config.width/2),Math.round(e.game.config.height/1.25),"progress_bar").setOrigin(.5,.5).setScale(e.scaleFactor,e.scaleFactor),this.loadingText=this.add.text(Math.round(e.game.config.width/2),Math.round(e.game.config.height/1.2),"Loading: ",{fontFamily:"Poppins_Bold",fontSize:"46px",fill:"#FFF",fontStyle:"normal",align:"center"}).setOrigin(.5,.5).setScale(e.scaleFactor,e.scaleFactor),this.progressBar.setCrop(0,0,0,this.progressBar.height)}LoadFonts(){let e=Object.getOwnPropertyNames(this.fonts);e.forEach(((s,t)=>{let a=t>=e.length-1;this.fonts[s]=new FontFaceObserver(s),this.fonts[s].load().then(this.FontLoadSuccess.bind(this,s,a),this.FontLoadError.bind(this,s))}))}FontLoadSuccess(e,s){s&&this.LoadAssests()}FontLoadError(e){}LoadAssests(){this.load.on("progress",this.LoadProgress,this),this.load.on("complete",this.OnComplete,{scene:this.scene}),this.load.image("symbol1","assets/images/slot-symbol1.png"),this.load.image("symbol2","assets/images/slot-symbol2.png"),this.load.image("symbol3","assets/images/slot-symbol3.png"),this.load.image("symbol4","assets/images/slot-symbol4.png"),this.load.image("slot_machine_base1","assets/images/slot-machine4.png"),this.load.image("slot_machine_base2","assets/images/slot-machine1.png"),this.load.image("slot_machine_reels","assets/images/slot-machine5.png"),this.load.image("slot_machine_handle1","assets/images/slot-machine2.png"),this.load.image("slot_machine_handle2","assets/images/slot-machine3.png"),this.load.start()}LoadProgress(e){this.progressBar.setCrop(0,0,this.progressBar.width*e,this.progressBar.height),e*=100,this.loadingText.setText("Loading: "+parseInt(e)+" %")}OnComplete(){setTimeout((()=>{e.game.scene.stop("PreloadScene"),this.scene.start("GameScene")}),500)}}class t extends Phaser.Scene{constructor(){super("GameScene"),this.symbols=["symbol1","symbol2","symbol3","symbol4"],this.reels=[],this.repeat=[3,6,9],this.payouts={symbol1:10,symbol2:20,symbol3:30,symbol4:40,bonus:50}}init(){}preload(){}create(){this.CreateBg(),this.CreateMask(),this.CreateReels(),this.CreateBase(),this.CreateSpinButton(),this.CreatePopup()}CreateBg(){this.gameplayBg=this.add.image(Math.round(e.game.config.width/2),Math.round(e.game.config.height/2),"one_pixel_white").setOrigin(.5,.5).setScale(Math.round(e.game.config.width),Math.round(e.game.config.height)),this.gameplayBg.setTint(5989924),this.baseFalse=this.add.image(Math.round(e.game.config.width/2),Math.round(e.game.config.height/2),"slot_machine_base1").setOrigin(.5,.5).setScale(e.scaleFactor,e.scaleFactor),this.baseFalse.setVisible(!1)}CreateBase(){this.base=this.add.sprite(Math.round(e.game.config.width/2),Math.round(e.game.config.height/2),"slot_machine_base1").setOrigin(.5,.5).setScale(e.scaleFactor,e.scaleFactor)}CreateMask(){this.graphics=this.add.graphics(0,0),this.graphics.fillRect(0,0,this.baseFalse.displayWidth,this.baseFalse.displayHeight),this.graphics.x=this.baseFalse.x-this.baseFalse.displayWidth/2,this.graphics.y=this.baseFalse.y-this.baseFalse.displayHeight/2}CreateReels(){this.reelsImg=this.add.image(Math.round(e.game.config.width/2),Math.round(e.game.config.height/2),"slot_machine_reels").setOrigin(.5,.5).setScale(e.scaleFactor,e.scaleFactor);for(let e=0;e<3;e++){let s=this.add.container(this.reelsImg.x-125,this.reelsImg.y-65);for(let t=0;t<4;t++){let a=this.add.image(130*e,0+100*t,Phaser.Utils.Array.GetRandom(this.symbols));s.add(a)}this.reels.push(s)}for(let e=0;e<this.reels.length;e++)this.reels[e].mask=new Phaser.Display.Masks.GeometryMask(this,this.graphics)}CreateSpinButton(){this.spinButton=this.add.image(Math.round(e.game.config.width/2),Math.round(e.game.config.height/2),"slot_machine_handle1").setOrigin(.5,.5).setScale(e.scaleFactor,e.scaleFactor),this.spinButton.setInteractive({useHandCursor:!0}),this.spinButton.on("pointerdown",this.SpinReels,this),this.spinButton.on("pointerup",this.SpinReelsRelease,this)}SpinReels(){this.spinButton.setTexture("slot_machine_handle2");for(let e=0;e<this.reels.length;e++){let s=this.reels[e].list[0].displayHeight;this.columnTween1=this.tweens.add({targets:this.reels[e],ease:"Linear",props:{y:{value:"+="+s,duration:150}},repeat:this.repeat[e],onRepeat:t=>{const a=Phaser.Math.RND.between(1,4),i=this.reels[e];t.updateTo("y",i.y+s,!0),i.last.y=i.first.y-s;const o=i.last;o.setVisible(!0).setTexture("symbol"+a),i.moveTo(o,0)},onComplete:()=>{this.reels[e].setPosition(this.reels[e].x,this.reels[e].y-96),this.reels[e].setPosition(this.reels[e].x,this.reels[e].y),e===this.reels.length-1&&this.CheckWin()}})}}SpinReelsRelease(){this.spinButton.setTexture("slot_machine_handle1"),this.spinButton.removeInteractive()}HandleBonusFeature(){this.ShowPopup("Bonus Feature Activated!")}CheckWin(){let e=this.reels.map((e=>e.list[1].texture.key));if(e.every((s=>s===e[0]))){let s=this.payouts[e[0]];this.ShowPopup(`You Win ${s} Points`)}else e.includes("bonus")?this.HandleBonusFeature():this.ShowPopup("You Lose");this.spinButton.setInteractive({useHandCursor:!0})}CreatePopup(){this.popupContainer=this.add.container(Math.round(e.game.config.width/2),Math.round(e.game.config.height/2)),this.popupBase=this.add.image(0,-450,"one_pixel_white").setOrigin(.5,.5).setScale(Math.round(e.game.config.width/1.9),Math.round(e.game.config.height/10)),this.popupBase.setTint(4466324),this.messageText=this.add.text(0,-450,"MESSAGE",{fontFamily:"Poppins_Bold",fontSize:"48px",fill:"#FFF",fontStyle:"bold",align:"center"}).setOrigin(.5,.5).setScale(e.scaleFactor,e.scaleFactor),this.popupContainer.add([this.popupBase,this.messageText]),this.popupContainer.setDepth(2),this.popupContainer.setAlpha(0)}ShowPopup(e){this.messageText.setText(e),this.add.tween({targets:[this.popupContainer],ease:"Sine.easeInOut",duration:300,alpha:1,callbackScope:this,onComplete:()=>{setTimeout((()=>{this.HidePopup()}),700)}})}HidePopup(){this.add.tween({targets:[this.popupContainer],ease:"Sine.easeInOut",duration:200,alpha:0,callbackScope:this,onComplete:()=>{}})}}let a=new s,i=new t;window.onload=function(){let s;e.isMobile=/iPhone|iPhoneX|iPod|iPad|BlackBerry|kindle|playbook|Windows Phone|Android/i.test(navigator.userAgent),s=e.isMobile?{type:Phaser.AUTO,backgroundColor:2236962,parent:"template",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},width:window.innerWidth,height:window.innerHeight}:{type:Phaser.AUTO,backgroundColor:2236962,parent:"template",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},width:1080,height:1920},e.game=new Phaser.Game(s),e.scaleFactor=s.height/1920,window.focus(),e.game.scene.add("PreloadScene",a),e.game.scene.add("GameScene",i),e.game.scene.start("PreloadScene")}})();